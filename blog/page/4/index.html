
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert</title>
  <meta name="author" content="Karol Galanciak">

  
  <meta name="description" content="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert">

  
  <meta name="keywords" content="Ruby on Rails, RabbitMQ, Kafka, Microservices, Distributed Systems, Architecture, Ember.js, PostgreSQL, JavaScript, Consulting, MVP, post MVP, legacy apps">

  
  

  <meta property="og:title" value="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert" />
  <meta property="og:description" value="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert" />
  <meta property="og:url" value="https://karolgalanciak.com/blog/page/4/index.html" />
  <meta property="og:type" content="website" />
  
  <meta property="og:site_name" content="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert"/>
  <meta property="og:locale" content="en_US" />

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@Azdaroth">
  <meta name="twitter:creator" content="@Azdaroth">
  <meta name="twitter:title" content="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert">
  <meta name="twitter:url" content="">
  <meta name="twitter:description" content="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://karolgalanciak.com/blog/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert" type="application/atom+xml">
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type":"WebPage",
        "@id": "https://karolgalanciak.com/blog/page/4"
      },
      "headline": "Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert",
        "image": {
        "@type": "ImageObject",
        "url": "",
        "height": 640,
        "width": 1024
      },
      "datePublished": "",
      "dateModified": "2019-09-19",
      "author": {
        "@type": "Person",
        "name": "Karol Galanciak"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Karol Galanciak",
        "logo": {
          "@type": "ImageObject",
          "url": "https://karolgalanciak.com/images/me_formal.jpg",
          "width": 600,
          "height": 60
        }
      },
      "description": "Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert",
      "keywords": "Ruby on Rails, RabbitMQ, Kafka, Microservices, Distributed Systems, Architecture, Ember.js, PostgreSQL, JavaScript, Consulting, MVP, post MVP, legacy apps"
    }
  </script>
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42570582-1', 'auto');
    ga('send', 'pageview');
    ga('set', 'anonymizeIp', true);
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Karol Galanciak - Distributed Systems Architect and Ruby on Rails expert</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:karolgalanciak.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">About Me</a></li>
  <li><a href="/blog">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/test-driven-ember">Test-Driven Ember Book</a></li>
  <li><a href="/presentations">Presentations</a></li>
  <li><a href="/publications">Publications</a></li>
  <li><a href="/open-source">Open Source</a></li>
  <li><a href="/privacy-policy">Privacy Policy</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/30/little-known-but-useful-rails-features-activerecord-querymethods-dot-extending/">Little-known but Useful Rails Features: ActiveRecord.extending</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-08-30T12:00:00+02:00" pubdate data-updated="true">Aug 30<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Every now and then I discover some features in <strong>Rails</strong> that are not that (arguably) commonly used, but there are some use cases when they turn out to be super useful and the <strong>best tool</strong> for the job. One of them would definitely be a nice addition to <code>ActiveRecord::QueryMethods</code> - <code>extending</code> method. Let’s see how it could be used in the <strong>Rails apps</strong>.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/08/30/little-known-but-useful-rails-features-activerecord-querymethods-dot-extending/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/07/31/decoding-rails-magic-how-does-calling-class-methods-on-mailers-work/">Decoding Rails Magic: How Does Calling Class Methods on Mailers Work</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-07-31T21:15:00+02:00" pubdate data-updated="true">Jul 31<span>st</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Have you ever wondered how it is possible that calling <strong>class methods</strong> on <strong>mailers</strong> work in Rails, even though you only define some instance methods in those classes? It seems like it’s quite common question, especially when you see the mailers in action for the first time. Apparently, there is some Ruby &#8220;magic&#8221; involved here, so let’s try to <b>decode</b> it and check what happens under the hood.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/07/31/decoding-rails-magic-how-does-calling-class-methods-on-mailers-work/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/07/10/scaling-up-rails-applications-with-postgresql-table-partitioning-part-3/">Scaling Up Rails Applications With PostgreSQL Table Partitioning - Part 3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-07-10T23:50:00+02:00" pubdate data-updated="true">Jul 10<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After publishing recent blog posts about table partitioning - its <a href="https://karolgalanciak.com/blog/2016/06/05/scaling-up-rails-applications-with-postgresql-table-partitioning-part-1/" target="_blank">SQL basics part</a> and <a href="https://karolgalanciak.com/blog/2016/06/12/scaling-up-rails-applications-with-postgresql-table-partitioning-part-2/" target="_blank">how to use in in Rails application</a> I was asked quite a few times what is the real <b>performance gain</b> when using <strong>table partitioning</strong>. This is a great question, so let&#8217;s answer it by performing some benchmarks.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/07/10/scaling-up-rails-applications-with-postgresql-table-partitioning-part-3/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/12/scaling-up-rails-applications-with-postgresql-table-partitioning-part-2/">Scaling Up Rails Applications With PostgreSQL Table Partitioning - Part 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-06-12T22:45:00+02:00" pubdate data-updated="true">Jun 12<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the previous <a href="https://karolgalanciak.com/blog/2016/06/05/scaling-up-rails-applications-with-postgresql-table-partitioning-part-1/" target="_blank">blog post</a> we learned some basics about <strong>table partitioning</strong>: how it works and what kind of problems it solves. So far we&#8217;ve been discussing mostly basic concepts with raw <strong>SQL</strong> examples. But the essential question in our case would be: how to make it work inside <strong>Rails application</strong> then? Let&#8217;s see what we can do about it.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/06/12/scaling-up-rails-applications-with-postgresql-table-partitioning-part-2/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/05/scaling-up-rails-applications-with-postgresql-table-partitioning-part-1/">Scaling Up Rails Applications With PostgreSQL Table Partitioning - Part 1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-06-05T22:00:00+02:00" pubdate data-updated="true">Jun 5<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You&#8217;ve probably heard many times that the database is the bottleneck of many web applications. This isn&#8217;t necessarily true. Often it happens that some heavy queries can be substiantially optimized, making them really efficient and fast. As the time passes by, however, the data can remarkably grow in size, especially in several years time which can indeed make the database a bottleneck - the tables are huge and don&#8217;t fit into memory any longer, the indexes are even bigger making queries much slower and you can&#8217;t really optimize further any query. In many cases deleting old records that are no longer used is not an option - they still can have some value, e.g. for data analysis or statystical purposes. Fortunately, it&#8217;s not a dead end. You can make your database performance great again with a new secret weapon: table partitioning.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/06/05/scaling-up-rails-applications-with-postgresql-table-partitioning-part-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/06/when-validation-is-not-enough-postgresql-triggers-for-data-integrity/">When Validation Is Not Enough: PostgreSQL Triggers for Data Integrity</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-05-06T19:45:00+02:00" pubdate data-updated="true">May 6<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Is <strong>validation</strong> in your models or form objects enough to ensure <strong>integrity of the data</strong>? Well, seems like you can&#8217;t really persist a record when the data is <strong>not valid</strong> unless you intentionally try to bypass validation using <code>save: false</code> option when calling <code>save</code> or using <code>update_column</code>. What about <strong>uniqueness validation</strong>?
A classic example would be a unique <code>email</code> per user. To make sure the email is truly unique we could add a unique index in database - not only would it prevent saving non-unique users when <strong>bypassing validation</strong>, but also it would raise extra error when 2 <strong>concurrent requests</strong> would attempt to save user with the same email. However, some validations are more complex that ensuring  a value is unique and index won&#8217;t really help much. Fortunately, PostgreSQL is powerful enough to provide a perfect solution to such problem. Time to meet your new friend: <strong>PostgreSQL triggers</strong>.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/05/06/when-validation-is-not-enough-postgresql-triggers-for-data-integrity/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/24/security-on-rails-hacking-sessions-with-insecure-secret-key-base/">Security on Rails: Hacking Sessions With Insecure Secret Key Base</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-04-24T20:00:00+02:00" pubdate data-updated="true">Apr 24<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was recently asked what is <code>secret key base</code> used for in Rails applications and why not secure value of it (or even worse - the public one!) creates a security issue. That was a really good question, I remember how it was a serious threat years ago, especially before introducing <code>secrets.yml</code> in Rails 4.1 - at that time by default <code>secret_token</code> initializer was generated and the secret key was directly stored there. The result was that in many open source projects secret key was publicly available creating a great <strong>security risk</strong>. Let&#8217;s take a look how exposed secret key base could be exploited.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/04/24/security-on-rails-hacking-sessions-with-insecure-secret-key-base/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/02/20/postgresql-in-action-sorting-with-nullif-expression/">PostgreSQL in Action: Sorting With NULLIF Expression</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-02-20T21:20:00+01:00" pubdate data-updated="true">Feb 20<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ordering with <strong>ActiveRecord</strong> and <strong>PostgreSQL</strong> may seem like an obvious and simple thing: in most cases you just specify one or several criteria with direction of ordering like <code>order(name: :asc)</code> and that&#8217;s all, maybe in more <b>complex scenarios</b> you would need to use <code>CASE</code> statement to provide some more customized conditions. But how could we approach sorting with forcing <b>blank values</b> to be the last ones, regardless of the direction of the sort? You might be thinking now about <code>NULLS LAST</code> statement for this purpose, but that&#8217;s not going to handle empty string. For this case you need something special: time to meet <code>NULLIF</code> conditional expression.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/02/20/postgresql-in-action-sorting-with-nullif-expression/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/02/07/implementing-non-restful-actions-with-ember-data/">Implementing non-RESTful Actions With Ember Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-02-07T10:45:00+01:00" pubdate data-updated="true">Feb 7<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my <a target="_blank" href="http://karolgalanciak.com/blog/2016/01/24/how-to-handle-non-crud-logic-in-your-api/">recent post</a> I mentioned some strategies of handling non-strictly <strong>CRUD</strong> / <strong>RESTful</strong> actions in <strong>API</strong>. One of them was adding extra actions beyond creating, updating and deleting resources. As it&#8217;s not a standard solution and some data layers on client side (like <strong>Ember Data</strong>) don&#8217;t handle it out-of-box, I was asked by some developers what&#8217;s the best way to handle such actions. So let&#8217;s see how can we hack into <strong>Ember Data</strong> and make it smooth.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/02/07/implementing-non-restful-actions-with-ember-data/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/24/how-to-handle-non-crud-logic-in-your-api/">How to Handle Non-CRUD Logic in Your API</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-01-24T22:00:00+01:00" pubdate data-updated="true">Jan 24<span>th</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you happen to develop <strong>API</strong> for non-trivial app with complex business logic beyond <strong>CRUD</strong> directly mapped to the database tables (i.e. typical Active Record pattern) you were probably wondering many times how to handle these cases and what&#8217;s the best way to do it. There are quite a few solutions to this problem: you could add another endpoint for handling given use case, add <strong>non-RESTful</strong> action to already existing endpoint or you can add a magic param to the payload that would force non-standard scenario in the <strong>API</strong>. Let&#8217;s take a closer look at the these solutions and discuss some advantages and disadvantages of each of them.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/01/24/how-to-handle-non-crud-logic-in-your-api/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <img class="left" src="/images/me_formal.jpg" title="me:)" alt="Karol Galanciak - photo">
  <p>Hi, I&#8217;m Karol Galanciak, I&#8217;m a distributed systems architect and a domain expert in vacation rental industry, taking it to the next level as CTO of <a href="https://www.bookingsync.com">BookingSync</a></p>

  <p>I specialize in distributed systems and microservices architecture, working with message queues, distributed streaming platforms, designing APIs and working with legacy applications.</p>

  <p id="email-me"></p>
</section>

<script type="text/javascript">
  (function(d, id, lhs, rhs) {
    d.getElementById(id).innerHTML = "You can reach me at <a rel='nofollow' href='mailto:" + lhs + "@" + rhs + "'>" + lhs + "@" + rhs + "</a>";
  })(window.document, 'email-me', 'karol.galanciak', 'gmail.com');
</script>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2019/08/18/durable-sidekiq-jobs-how-to-maximize-reliability-of-sidekiq-and-redis/">Durable Sidekiq Jobs: How to Maximize Reliability of Sidekiq and Redis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/06/23/messages-on-rails-part-3-rabbitmq/">Messages on Rails Part 3: RabbitMQ</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/04/07/messages-on-rails-part-2-kafka/">Messages on Rails Part 2: Kafka</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/02/24/messages-on-rails-part-1-introduction-to-kafka-and-rabbitmq/">Messages on Rails Part 1 - Introduction to Kafka and RabbitMQ</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/01/27/how-to-tell-the-difference-between-a-default-and-provided-value-for-optional-arguments-in-ruby/">How to Tell the Difference Between a Default and a Provided Value for Optional Arguments in Ruby?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/Azdaroth">@Azdaroth</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'Azdaroth',
            count: 6,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
   <h1>Twitter</h1>
   <a class="twitter-timeline" href="https://twitter.com/Azdaroth" data-widget-id="357234540634329088">Tweets by @Azdaroth</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Karol Galanciak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'karolgalanciak';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
